# –ê–Ω–∞–ª–∏–∑ JavaScript –∫–æ–¥–∞ –Ω–∞ –æ—à–∏–±–∫–∏

## üìã –ü—Ä–æ–≤–µ–¥–µ–Ω–Ω—ã–π –∞–Ω–∞–ª–∏–∑

–î–∞—Ç–∞ –∞–Ω–∞–ª–∏–∑–∞: 2026-01-22
–ü—Ä–æ–∞–Ω–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã:
- `js/session-storage.js` (–ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–π –∫–æ–¥)
- `sw.js` (Service Worker)
- `dist/config.js` (–∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è)
- –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–∏–Ω—Ç–∞–∫—Å–∏—Å–∞ –æ—Å–Ω–æ–≤–Ω—ã—Ö —Ñ–∞–π–ª–æ–≤

---

## ‚úÖ –†–µ–∑—É–ª—å—Ç–∞—Ç—ã –∞–Ω–∞–ª–∏–∑–∞

### 1. `js/session-storage.js` - ‚úÖ –ò–°–ü–†–ê–í–õ–ï–ù–û

#### ‚úÖ –ü—Ä–æ–±–ª–µ–º–∞ #1: –î–æ—Å—Ç—É–ø –∫ `document.body` –¥–æ –∑–∞–≥—Ä—É–∑–∫–∏ DOM - –ò–°–ü–†–ê–í–õ–ï–ù–û

**–ë—ã–ª–æ**: –ü—Ä—è–º–æ–π –¥–æ—Å—Ç—É–ø –∫ `document.body.classList` –¥–æ –∑–∞–≥—Ä—É–∑–∫–∏ DOM  
**–ò—Å–ø—Ä–∞–≤–ª–µ–Ω–æ**: –î–æ–±–∞–≤–ª–µ–Ω–∞ —Ñ—É–Ω–∫—Ü–∏—è `updateBodyClass()` —Å –ø—Ä–æ–≤–µ—Ä–∫–æ–π –Ω–∞–ª–∏—á–∏—è `document.body` –∏ fallback –Ω–∞ `DOMContentLoaded`

**–†–µ—à–µ–Ω–∏–µ –ø—Ä–∏–º–µ–Ω–µ–Ω–æ**:
```javascript
function updateBodyClass(className, remove) {
    if (document.body) {
        // –ù–µ–º–µ–¥–ª–µ–Ω–Ω–æ–µ –ø—Ä–∏–º–µ–Ω–µ–Ω–∏–µ
        if (remove) {
            document.body.classList.remove(className);
        } else {
            document.body.classList.add(className);
        }
    } else {
        // Fallback: –∂–¥–µ–º DOMContentLoaded
        document.addEventListener('DOMContentLoaded', function() {
            if (remove) {
                document.body.classList.remove(className);
            } else {
                document.body.classList.add(className);
            }
        });
    }
}
```

#### ‚úÖ –ü—Ä–æ–±–ª–µ–º–∞ #2: –£—Å—Ç–∞—Ä–µ–≤—à–∏–π API `performance.navigation.type` - –ò–°–ü–†–ê–í–õ–ï–ù–û

**–ë—ã–ª–æ**: –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ —É—Å—Ç–∞—Ä–µ–≤—à–µ–≥–æ `performance.navigation.type`  
**–ò—Å–ø—Ä–∞–≤–ª–µ–Ω–æ**: –ó–∞–º–µ–Ω–µ–Ω–æ –Ω–∞ —Å–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–π API —Å fallback

**–†–µ—à–µ–Ω–∏–µ –ø—Ä–∏–º–µ–Ω–µ–Ω–æ**:
```javascript
const isPageRefresh = !window.location.hash || 
    (performance.getEntriesByType && 
     performance.getEntriesByType('navigation')[0]?.type === 'reload') ||
    (performance.navigationType === 1);
```

#### ‚úÖ –ü—Ä–æ–±–ª–µ–º–∞ #3: –ü–æ—Ç–µ–Ω—Ü–∏–∞–ª—å–Ω–∞—è —É—Ç–µ—á–∫–∞ –ø–∞–º—è—Ç–∏ - –ò–°–ü–†–ê–í–õ–ï–ù–û

**–ë—ã–ª–æ**: `hashHistory` –º–∞—Å—Å–∏–≤ —Ä–∞—Å—Ç–µ—Ç –±–µ—Å–∫–æ–Ω–µ—á–Ω–æ  
**–ò—Å–ø—Ä–∞–≤–ª–µ–Ω–æ**: –î–æ–±–∞–≤–ª–µ–Ω–æ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ —Ä–∞–∑–º–µ—Ä–∞ –º–∞—Å—Å–∏–≤–∞ (MAX_HISTORY_SIZE = 50)

**–†–µ—à–µ–Ω–∏–µ –ø—Ä–∏–º–µ–Ω–µ–Ω–æ**:
```javascript
const MAX_HISTORY_SIZE = 50;
if (hashHistory.length > MAX_HISTORY_SIZE) {
    hashHistory = hashHistory.slice(-MAX_HISTORY_SIZE);
}
```

#### üü° –ü—Ä–æ–±–ª–µ–º–∞ #4: –û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ –æ–±—Ä–∞–±–æ—Ç–∫–∏ –æ—à–∏–±–æ–∫ - –û–°–¢–ê–ï–¢–°–Ø

**–°—Ç–∞—Ç—É—Å**: –ú–æ–∂–Ω–æ —É–ª—É—á—à–∏—Ç—å, –Ω–æ –Ω–µ –∫—Ä–∏—Ç–∏—á–Ω–æ –¥–ª—è –¥–∞–Ω–Ω–æ–≥–æ —Å–∫—Ä–∏–ø—Ç–∞  
**–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è**: –î–æ–±–∞–≤–∏—Ç—å try-catch –±–ª–æ–∫–∏ –ø—Ä–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏

---

### 2. `sw.js` (Service Worker) - –ù–ê–ô–î–ï–ù–´ –ü–†–û–ë–õ–ï–ú–´

#### üü° –ü—Ä–æ–±–ª–µ–º–∞ #1: –ù–µ–ø–æ–ª–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫ –≤ fetch

**–ú–µ—Å—Ç–æ**: –°—Ç—Ä–æ–∫–∞ 19-24
```javascript
self.addEventListener('fetch', (event) => {
  event.respondWith(
    caches.match(event.request)
      .then((response) => response || fetch(event.request))
      .catch(() => {})  // –ü—É—Å—Ç–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫
  );
});
```

**–ü—Ä–æ–±–ª–µ–º–∞**: 
- –ü—É—Å—Ç–æ–π `catch` —Å–∫—Ä—ã–≤–∞–µ—Ç –æ—à–∏–±–∫–∏
- –ü—Ä–∏ –æ—à–∏–±–∫–µ fetch –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç—Å—è `undefined`, —á—Ç–æ –º–æ–∂–µ—Ç –≤—ã–∑–≤–∞—Ç—å –ø—Ä–æ–±–ª–µ–º—ã
- –ù–µ—Ç fallback –¥–ª—è —Å–µ—Ç–µ–≤—ã—Ö –æ—à–∏–±–æ–∫

**–†–µ—à–µ–Ω–∏–µ**: 
```javascript
self.addEventListener('fetch', (event) => {
  event.respondWith(
    caches.match(event.request)
      .then((response) => {
        if (response) return response;
        return fetch(event.request)
          .then((response) => {
            // –ö—ç—à–∏—Ä—É–µ–º —É—Å–ø–µ—à–Ω—ã–µ –æ—Ç–≤–µ—Ç—ã
            if (response.status === 200) {
              const responseToCache = response.clone();
              caches.open(CACHE_NAME).then((cache) => {
                cache.put(event.request, responseToCache);
              });
            }
            return response;
          })
          .catch(() => {
            // Fallback –¥–ª—è –æ—Ñ–ª–∞–π–Ω —Ä–µ–∂–∏–º–∞
            if (event.request.destination === 'image') {
              return new Response('Offline', { status: 503 });
            }
            return new Response('Network error', { status: 503 });
          });
      })
      .catch(() => new Response('Cache error', { status: 503 }))
  );
});
```

#### üü° –ü—Ä–æ–±–ª–µ–º–∞ #2: –ù–µ—Ç –æ—á–∏—Å—Ç–∫–∏ —Å—Ç–∞—Ä—ã—Ö –∫—ç—à–µ–π

**–ú–µ—Å—Ç–æ**: –°—Ç—Ä–æ–∫–∞ 27-39

**–ü—Ä–æ–±–ª–µ–º–∞**: `activate` —Å–æ–±—ã—Ç–∏–µ —É–¥–∞–ª—è–µ—Ç —Å—Ç–∞—Ä—ã–µ –∫—ç—à–∏, –Ω–æ –º–æ–∂–µ—Ç –Ω–µ —Å—Ä–∞–±–æ—Ç–∞—Ç—å –ø—Ä–∞–≤–∏–ª—å–Ω–æ.

**–†–µ—à–µ–Ω–∏–µ**: –î–æ–±–∞–≤–∏—Ç—å –ø—Ä–æ–≤–µ—Ä–∫—É:
```javascript
self.addEventListener('activate', (event) => {
  event.waitUntil(
    caches.keys().then((cacheNames) => {
      return Promise.all(
        cacheNames
          .filter((cacheName) => cacheName !== CACHE_NAME)
          .map((cacheName) => caches.delete(cacheName))
      );
    })
  );
});
```

#### üü¢ –•–æ—Ä–æ—à–∞—è –ø—Ä–∞–∫—Ç–∏–∫–∞: –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ BASE_PATH

–ö–æ–¥ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç `BASE_PATH` –¥–ª—è –≤—Å–µ—Ö –ø—É—Ç–µ–π, —á—Ç–æ –ø—Ä–∞–≤–∏–ª—å–Ω–æ –¥–ª—è GitHub Pages.

---

### 3. `dist/config.js` - ‚úÖ –ë–ï–ó –û–®–ò–ë–û–ö

**–°—Ç–∞—Ç—É—Å**: –ü—É—Ç–∏ –∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã
```javascript
window.RM.config = {
  root: "/UCB-SIte-CRYPTO/",  // ‚úÖ –ü—Ä–∞–≤–∏–ª—å–Ω–æ
  pushState: true
}

window.chunkURL = "/UCB-SIte-CRYPTO/dist/";  // ‚úÖ –ü—Ä–∞–≤–∏–ª—å–Ω–æ
```

**–ü—Ä–∏–º–µ—á–∞–Ω–∏–µ**: –§–∞–π–ª —É–∂–µ –±—ã–ª –∏—Å–ø—Ä–∞–≤–ª–µ–Ω —Ä–∞–Ω–µ–µ –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å GitHub Pages.

---

## üìä –°–≤–æ–¥–Ω–∞—è —Ç–∞–±–ª–∏—Ü–∞ –ø—Ä–æ–±–ª–µ–º

| –§–∞–π–ª | –ö—Ä–∏—Ç–∏—á–Ω–æ—Å—Ç—å | –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø—Ä–æ–±–ª–µ–º | –°—Ç–∞—Ç—É—Å |
|------|-------------|-------------------|--------|
| `js/session-storage.js` | ‚úÖ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–æ | 4 –ø—Ä–æ–±–ª–µ–º—ã ‚Üí 0 | ‚úÖ **–ò–°–ü–†–ê–í–õ–ï–ù–û** |
| `sw.js` | üü° –°—Ä–µ–¥–Ω—è—è | 2 –ø—Ä–æ–±–ª–µ–º—ã | –†–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è —É–ª—É—á—à–∏—Ç—å |
| `dist/config.js` | ‚úÖ –ë–µ–∑ –æ—à–∏–±–æ–∫ | 0 –ø—Ä–æ–±–ª–µ–º | ‚úÖ –ö–æ—Ä—Ä–µ–∫—Ç–Ω–æ |

---

## üõ†Ô∏è –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –ø–æ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—é

### ‚úÖ –í—ã–ø–æ–ª–Ω–µ–Ω–æ (–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç 1 - –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏–π)

1. ‚úÖ **–ò—Å–ø—Ä–∞–≤–ª–µ–Ω –¥–æ—Å—Ç—É–ø –∫ `document.body`** –≤ `session-storage.js` - –¥–æ–±–∞–≤–ª–µ–Ω–∞ —Ñ—É–Ω–∫—Ü–∏—è `updateBodyClass()` —Å –ø—Ä–æ–≤–µ—Ä–∫–æ–π –Ω–∞–ª–∏—á–∏—è body
2. ‚úÖ **–ó–∞–º–µ–Ω–µ–Ω —É—Å—Ç–∞—Ä–µ–≤—à–∏–π API** `performance.navigation.type` –Ω–∞ —Å–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–π `performance.navigationType` –∏ Navigation Timing API
3. ‚úÖ **–û–≥—Ä–∞–Ω–∏—á–µ–Ω —Ä–∞–∑–º–µ—Ä `hashHistory`** –¥–ª—è –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–µ–Ω–∏—è —É—Ç–µ—á–∫–∏ –ø–∞–º—è—Ç–∏ (–º–∞–∫—Å–∏–º—É–º 50 –∑–∞–ø–∏—Å–µ–π)

### –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç 2 (–í–∞–∂–Ω—ã–π)

4. **–£–ª—É—á—à–∏—Ç—å –æ–±—Ä–∞–±–æ—Ç–∫—É –æ—à–∏–±–æ–∫** –≤ Service Worker (`sw.js`)
   - –î–æ–±–∞–≤–∏—Ç—å –±–æ–ª–µ–µ –¥–µ—Ç–∞–ª—å–Ω—É—é –æ–±—Ä–∞–±–æ—Ç–∫—É –æ—à–∏–±–æ–∫ fetch
   - –î–æ–±–∞–≤–∏—Ç—å fallback –¥–ª—è –æ—Ñ–ª–∞–π–Ω —Ä–µ–∂–∏–º–∞

### –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç 3 (–ñ–µ–ª–∞—Ç–µ–ª—å–Ω–æ)

5. **–î–æ–±–∞–≤–∏—Ç—å –æ–±—Ä–∞–±–æ—Ç–∫—É –æ—à–∏–±–æ–∫** –≤ –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏—Ö –º–µ—Å—Ç–∞—Ö (try-catch –±–ª–æ–∫–∏)
6. **–û–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞—Ç—å Service Worker** - –¥–æ–±–∞–≤–∏—Ç—å –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏—Ö –∑–∞–ø—Ä–æ—Å–æ–≤

---

## ‚úÖ –ß—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç –ø—Ä–∞–≤–∏–ª—å–Ω–æ

1. ‚úÖ –°–∏–Ω—Ç–∞–∫—Å–∏—Å –≤—Å–µ—Ö —Ñ–∞–π–ª–æ–≤ –∫–æ—Ä—Ä–µ–∫—Ç–µ–Ω
2. ‚úÖ Service Worker —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–∞–≤–∏–ª—å–Ω–∞—è
3. ‚úÖ –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ IIFE –¥–ª—è –∏–∑–æ–ª—è—Ü–∏–∏ –∫–æ–¥–∞ –≤ `session-storage.js`
4. ‚úÖ –ü—Ä–∞–≤–∏–ª—å–Ω–æ–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ —Å–æ–±—ã—Ç–∏–π–Ω—ã—Ö –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤
5. ‚úÖ BASE_PATH –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –≤ Service Worker

---

## üìù –°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏

1. –ò—Å–ø—Ä–∞–≤–∏—Ç—å –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ –æ—à–∏–±–∫–∏
2. –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è –≤ —Ä–∞–∑–Ω—ã—Ö –±—Ä–∞—É–∑–µ—Ä–∞—Ö
3. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Ä–∞–±–æ—Ç—É –Ω–∞ GitHub Pages
4. –î–æ–±–∞–≤–∏—Ç—å unit-—Ç–µ—Å—Ç—ã –¥–ª—è –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏—Ö —Ñ—É–Ω–∫—Ü–∏–π
