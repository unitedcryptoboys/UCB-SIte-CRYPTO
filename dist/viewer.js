import{a as H}from"/u1179532223/5339356/dist/c/c-EPKTVRQZ.js";import{a as N}from"/u1179532223/5339356/dist/c/c-ACYJA6MK.js";import{a as Q}from"/u1179532223/5339356/dist/c/c-5WRV2IYP.js";import{a as k,b as A,c as G,d as z,e as q,f as J,g as K}from"/u1179532223/5339356/dist/c/c-BG747NJT.js";import{b as _,d as u,e as $}from"/u1179532223/5339356/dist/c/c-2MSEV4NN.js";import"/u1179532223/5339356/dist/c/c-Q45OPFLP.js";import"/u1179532223/5339356/dist/c/c-ZIAJXMLD.js";import"/u1179532223/5339356/dist/c/c-W3QJEKN6.js";import"/u1179532223/5339356/dist/c/c-7PVUH4LZ.js";import"/u1179532223/5339356/dist/c/c-RLELM4TS.js";import"/u1179532223/5339356/dist/c/c-XA7XLDUE.js";import"/u1179532223/5339356/dist/c/c-NYNQODKR.js";import"/u1179532223/5339356/dist/c/c-XTDER2JQ.js";import{a as X}from"/u1179532223/5339356/dist/c/c-ABCRIXZW.js";import{a as R}from"/u1179532223/5339356/dist/c/c-7Y6XNIPQ.js";import"/u1179532223/5339356/dist/c/c-CLZDAMEO.js";import"/u1179532223/5339356/dist/c/c-VX57VYKY.js";import"/u1179532223/5339356/dist/c/c-SE3B3OTN.js";import"/u1179532223/5339356/dist/c/c-2LIONOS6.js";import"/u1179532223/5339356/dist/c/c-UVMIIJZV.js";import"/u1179532223/5339356/dist/c/c-YVETZ4Y2.js";import"/u1179532223/5339356/dist/c/c-ZHMITBX6.js";import"/u1179532223/5339356/dist/c/c-F33QT4Z4.js";import"/u1179532223/5339356/dist/c/c-ZJ5OKFI7.js";import"/u1179532223/5339356/dist/c/c-UJTKK4P7.js";import"/u1179532223/5339356/dist/c/c-OIFOWLMJ.js";import"/u1179532223/5339356/dist/c/c-BZDNFHFJ.js";import"/u1179532223/5339356/dist/c/c-H5SQ7W4A.js";import"/u1179532223/5339356/dist/c/c-63NRFAST.js";import"/u1179532223/5339356/dist/c/c-BI57UMEU.js";import"/u1179532223/5339356/dist/c/c-VWKPEP3Y.js";import"/u1179532223/5339356/dist/c/c-5XZKAQNH.js";import"/u1179532223/5339356/dist/c/c-GJIO3EWD.js";import"/u1179532223/5339356/dist/c/c-NENNBZMZ.js";import{a as W,b as ge}from"/u1179532223/5339356/dist/c/c-NJX2AGXK.js";import{s as L,u as ue}from"/u1179532223/5339356/dist/c/c-HFB52RZO.js";import"/u1179532223/5339356/dist/c/c-WEPRQOYS.js";import"/u1179532223/5339356/dist/c/c-NSXD5XS7.js";import"/u1179532223/5339356/dist/c/c-GRZ2LFEL.js";import"/u1179532223/5339356/dist/c/c-GLYLGYLV.js";import"/u1179532223/5339356/dist/c/c-5IKTCNH5.js";import"/u1179532223/5339356/dist/c/c-RVDFCEHN.js";import"/u1179532223/5339356/dist/c/c-QGN475KD.js";import{a as F,b as me}from"/u1179532223/5339356/dist/c/c-4NWW3YK7.js";import{a as O}from"/u1179532223/5339356/dist/c/c-XEEMNBI7.js";import{a as I,b as ce}from"/u1179532223/5339356/dist/c/c-CLY6UUDX.js";import"/u1179532223/5339356/dist/c/c-5OV52NZH.js";import"/u1179532223/5339356/dist/c/c-PIN4LZBS.js";import"/u1179532223/5339356/dist/c/c-F76JX3LG.js";import"/u1179532223/5339356/dist/c/c-ZCDN2C4Y.js";import"/u1179532223/5339356/dist/c/c-IHRDIBRL.js";import"/u1179532223/5339356/dist/c/c-JSCH46PO.js";import{n as B,p as se}from"/u1179532223/5339356/dist/c/c-MWJHPFEJ.js";import"/u1179532223/5339356/dist/c/c-7OAKJDUS.js";import"/u1179532223/5339356/dist/c/c-Q7L6TC6B.js";import"/u1179532223/5339356/dist/c/c-POUJ35QD.js";import"/u1179532223/5339356/dist/c/c-NFJ4PGVD.js";import"/u1179532223/5339356/dist/c/c-X3IXKJUF.js";import"/u1179532223/5339356/dist/c/c-Q7JB42OK.js";import"/u1179532223/5339356/dist/c/c-CCCQQLS7.js";import"/u1179532223/5339356/dist/c/c-RFMEDZC2.js";import"/u1179532223/5339356/dist/c/c-DDUQR2DR.js";import"/u1179532223/5339356/dist/c/c-MSBTLOXM.js";import"/u1179532223/5339356/dist/c/c-ERSFEUJG.js";import"/u1179532223/5339356/dist/c/c-G4QWMJ75.js";import"/u1179532223/5339356/dist/c/c-MUZXH4Z6.js";import"/u1179532223/5339356/dist/c/c-X6QHBF2Y.js";import"/u1179532223/5339356/dist/c/c-4XRG5VWH.js";import"/u1179532223/5339356/dist/c/c-HG7GJTGS.js";import"/u1179532223/5339356/dist/c/c-CXFUNZH6.js";import"/u1179532223/5339356/dist/c/c-SEXQVNXD.js";import"/u1179532223/5339356/dist/c/c-3OF2VW3S.js";import"/u1179532223/5339356/dist/c/c-P4X5POBL.js";import"/u1179532223/5339356/dist/c/c-NMSI6VX3.js";import"/u1179532223/5339356/dist/c/c-S4OGJYSK.js";import"/u1179532223/5339356/dist/c/c-67K7TJ5V.js";import"/u1179532223/5339356/dist/c/c-PQYQE4WJ.js";import"/u1179532223/5339356/dist/c/c-CUR76AAO.js";import"/u1179532223/5339356/dist/c/c-NZOAJRZB.js";import"/u1179532223/5339356/dist/c/c-4HYJT33R.js";import"/u1179532223/5339356/dist/c/c-SVF5UPD7.js";import"/u1179532223/5339356/dist/c/c-7WQ7VLJU.js";import"/u1179532223/5339356/dist/c/c-HY3BYE7A.js";import"/u1179532223/5339356/dist/c/c-CCLRE5PE.js";import"/u1179532223/5339356/dist/c/c-6V26Y4N6.js";import{q as j,r as ne}from"/u1179532223/5339356/dist/c/c-YWMSYINN.js";import"/u1179532223/5339356/dist/c/c-C63XTUXK.js";import{a as re}from"/u1179532223/5339356/dist/c/c-MTEWFZUN.js";import"/u1179532223/5339356/dist/c/c-HMG3J5I6.js";import"/u1179532223/5339356/dist/c/c-UV2AUEPO.js";import"/u1179532223/5339356/dist/c/c-ZICVJFZS.js";import"/u1179532223/5339356/dist/c/c-UKX3XYO7.js";import"/u1179532223/5339356/dist/c/c-QURGWM6Y.js";import"/u1179532223/5339356/dist/c/c-DHW7ZCWP.js";import"/u1179532223/5339356/dist/c/c-L7T2PT5A.js";import"/u1179532223/5339356/dist/c/c-ELKS2YNU.js";import"/u1179532223/5339356/dist/c/c-DM5RC5UP.js";import{n as x,p as ae}from"/u1179532223/5339356/dist/c/c-CZDWWIWZ.js";import"/u1179532223/5339356/dist/c/c-6VKWMR33.js";import"/u1179532223/5339356/dist/c/c-SMKXZXXM.js";import{C as E,D as s,F as y}from"/u1179532223/5339356/dist/c/c-NPM6MT5S.js";import{a as U}from"/u1179532223/5339356/dist/c/c-3JZSAYWT.js";import"/u1179532223/5339356/dist/c/c-IG4XOXEB.js";import{b as l,c as ie}from"/u1179532223/5339356/dist/c/c-OHFRQC2M.js";import"/u1179532223/5339356/dist/c/c-U2FTHHN5.js";import"/u1179532223/5339356/dist/c/c-UEIEIK52.js";import"/u1179532223/5339356/dist/c/c-2IW6BEWA.js";import{a as oe}from"/u1179532223/5339356/dist/c/c-BYDCJ7X5.js";import"/u1179532223/5339356/dist/c/c-CSPQ5T3S.js";import{d as P}from"/u1179532223/5339356/dist/c/c-TAHBUCPV.js";var te=P(re());ce();ge();var v=P(U());ae();var d=P(U());var h=P(oe());me();se();ie();ne();ue();y();function pe(t){if(!l.isScreenshot){if(!(window.RM?.common?.isDownloadedSource&&!window.RM?.common?.homepageRewrite)){let p=window.RM?.common?.isDomainViewer===!0;l.isProd&&!p&&import("/u1179532223/5339356/dist/c/c-5US73WHL.js").then(({getWebVitals:m})=>{m()}),B(t.num_id)}let i=new N;window.RM.analytics=i,window.RM.analytics&&(window.RM.analytics._triggerProjectView=!0)}}function b(t,o){let i=o?o.replace(/^\//,"")+(/\/$/.test(o)?"":"/"):"";return typeof t=="string"?t.replace(i,""):t}function de({location:t,history:o,isDomainForUser:i,isDomainViewer:p,isDownloadedSource:m,isHomepage:w,exportBasePath:c}){let g={environment:l.environment.viewer,navigate:(a,n)=>{n.replace?o.replace(a):o.push(a)},setUrlString:(a={})=>{let n=r.currentPage,e;if(p&&!i||m?e="":e=g.getMagUri(),n&&n.num!==1&&(e+=(n.pagePath||n.uri||n.num.toString())+"/"),e===o.location.pathname)return;let f=(parseInt(h.default.last(o.location.pathname.split("/"))||"",10)||1)===n.num||a.replace;m&&c&&!e.startsWith(c)&&(e=c+(/\/$/.test(c)?"":"/")+e.replace(/^\//,"")),m&&h.default.last(e)!=="/"&&(e+="/"),!w&&g.navigate(`${e[0]!=="/"?"/":""}${e}${t.search}`,{replace:f})},setTitle:()=>{if(!r||!r.currentPage)return;let a=F.getFinalSEO(r.currentPage,r,{customDomain:!!p});document.title=a.title||""},getMagUri:()=>i?(r.uri||r.num_id)+"/":p?"":h.default.isEmpty(r.user)?`${r.num_id}/`:`${r.user.uri}/${r.uri||r.num_id}/`,goBack:()=>{o.goBack()},go:(a=1,n)=>{if(n.isPageNum){r.showPage(a,n);return}let e=m?r.getPageByPath(b(a,c))||{}:r.getPageByPath(a)||{};r.showPage(e.num||a,n)},restartMag:()=>{window.location.reload()},onError:()=>{r&&g.go(1,{animation:!1})}},r=new $(window.ServerData.mags.mag,g);return r}function we({pageUri:t}){let{isDomainViewer:o,domainForUser:i,project:p,isDownloadedSource:m,homepageRewrite:w,exportBasePath:c}=(0,d.useContext)(R),[g,r]=(0,d.useState)(null),a=q(),n=z();return(0,d.useEffect)(()=>{if(g){let e=m?g.getPageByPath(b(t,c)||"1"):g.getPageByPath(t||"1");e&&g.currentPage!==e&&g.showPage(e.num)}},[t]),(0,d.useEffect)(()=>{if(p){u.setTiming("mag_loaded",Date.now());let e=de({location:a,history:n,isDomainViewer:o,isDownloadedSource:m,isDomainForUser:i,isHomepage:w,exportBasePath:c});r(e),window.RM.viewerRouter={mag:e,environment:l.environment.viewer,createMagFromTemplate:async(D,M)=>{let{default:V}=await import("/u1179532223/5339356/dist/c/c-MDEFCON6.js");new V({router:window.RM.viewerRouter,me:window.RM?.data?.usersLoader?.me,tp:D,templateID:M})}},pe(e),e.hasNewTextWidgets()&&L("viewer");let S=m&&t?b(t,c):t||"1",f=e.getPageByPath(S)||e.getPage(S)||{},T=e.model?.attributes?.usedWidgetTypes;_(T?.length?T:j.usedWidgets(e.pages||[],e.aboveGlobalWidgetsData)).finally(()=>{e.render(),e.showPage(f?f.num:1),u.setTiming("mag_rendered",Date.now());let D=e.currentPage.num,M=e.pages.reduce((V,C)=>V+(C.widgets?C.widgets.length:0),0)+e.aboveGlobalWidgets.length;setTimeout(()=>{u.setTiming("dom_complete",window.performance.timing.domComplete),u.sendTimings({projectNumId:e.num_id,userNumId:e.user.num_id,viewport:e.viewport,startPage:D,widgetsCount:M})},1e4)})}},[]),s(E,{})}function le(){let{pageUri:t}=J();return s(we,{pageUri:t})}var Z=le;y();function fe(t){let o=[];if(t.isDomainViewer?t.isDomainForUser?o.push("/:mag/:pageUri*"):o.push("/:pageUri*"):(o.push("/:user/:project/num/:pageNum"),o.push("/:user/:project/:pageUri*")),t.isDownloadedSource&&(o.push("/:pageUri*"),/msie [6-9]/i.test(navigator.userAgent)&&typeof window<"u"))throw window.location.href="sorry.html",new Error("Readymag does not support IE");return o}function Pe({ssr:t,location:o,children:i}){return t?s(A,{location:o,children:i}):s(K,{children:i})}function ye({location:t,ssr:o,...i}){let[p,m]=(0,v.useState)([]);(0,v.useEffect)(()=>{let c=fe({isDomainViewer:i.isDomainViewer,isDomainForUser:i.domainForUser,isDownloadedSource:i.isDownloadedSource});m(c),u.setTiming("dom_loaded",window.performance.timing.domLoading),u.setTiming("scripts_loaded",window.performance.timing.domContentLoadedEventEnd),u.setTiming("router_init",Date.now())},[]);let w=i.errorPage?s(X,{type:i.errorPage}):s(Pe,{ssr:o,location:t,children:s(G,{children:s(k,{path:p,children:s(Z,{})})})});return s(R.Provider,{value:i,children:s(x,{children:w})})}function ee(){Q(ye)}RM.common={...RM.common,...window.viewerConfig};I.setSupportedFormats();window.onload=()=>{document.querySelector("html").classList.add("page-loaded")};u.setTiming("viewer_start",Date.now());O();window.Backbone=H(te.default);u.setTiming("router_create",Date.now());W.init(window.ServerData&&window.ServerData.userPermissions);ee();
