import{a as t}from"/dist/c/c-S4L463HQ.js";import{a as r,b as f,c as h,d as m}from"/dist/c/c-PAHTVLIL.js";import{a as n}from"/dist/c/c-XA7XLDUE.js";import"/dist/c/c-NYNQODKR.js";import"/dist/c/c-HDTU5SGR.js";import"/dist/c/c-YVETZ4Y2.js";import"/dist/c/c-VWKPEP3Y.js";import{a as e,b as w}from"/dist/c/c-5XZKAQNH.js";import"/dist/c/c-GJIO3EWD.js";import"/dist/c/c-NENNBZMZ.js";import"/dist/c/c-NJX2AGXK.js";import"/dist/c/c-NSXD5XS7.js";import"/dist/c/c-CLY6UUDX.js";import"/dist/c/c-PIN4LZBS.js";import"/dist/c/c-7OAKJDUS.js";import"/dist/c/c-Q7L6TC6B.js";import"/dist/c/c-POUJ35QD.js";import"/dist/c/c-NFJ4PGVD.js";import"/dist/c/c-X3IXKJUF.js";import"/dist/c/c-Q7JB42OK.js";import"/dist/c/c-CCCQQLS7.js";import"/dist/c/c-RFMEDZC2.js";import"/dist/c/c-DDUQR2DR.js";import"/dist/c/c-MSBTLOXM.js";import"/dist/c/c-ERSFEUJG.js";import"/dist/c/c-CXFUNZH6.js";import"/dist/c/c-CCLRE5PE.js";import"/dist/c/c-6V26Y4N6.js";import"/dist/c/c-YWMSYINN.js";import"/dist/c/c-C63XTUXK.js";import{a as p}from"/dist/c/c-MTEWFZUN.js";import"/dist/c/c-HMG3J5I6.js";import"/dist/c/c-UV2AUEPO.js";import"/dist/c/c-ZICVJFZS.js";import"/dist/c/c-UKX3XYO7.js";import"/dist/c/c-QURGWM6Y.js";import"/dist/c/c-DHW7ZCWP.js";import"/dist/c/c-ELKS2YNU.js";import"/dist/c/c-DM5RC5UP.js";import"/dist/c/c-CZDWWIWZ.js";import"/dist/c/c-6VKWMR33.js";import"/dist/c/c-SMKXZXXM.js";import"/dist/c/c-NPM6MT5S.js";import"/dist/c/c-3JZSAYWT.js";import"/dist/c/c-IG4XOXEB.js";import"/dist/c/c-OHFRQC2M.js";import{d as o,f as u}from"/dist/c/c-U2FTHHN5.js";import{a as g}from"/dist/c/c-UEIEIK52.js";import{b as c}from"/dist/c/c-2IW6BEWA.js";import"/dist/c/c-BYDCJ7X5.js";import"/dist/c/c-CSPQ5T3S.js";import{d as i}from"/dist/c/c-TAHBUCPV.js";var l=i(g()),s=i(c()),a=i(p());f();w();m();u();var v=t.extend({render:function(){return this.rendered=!0,this.template=n["template-viewer-widget-background"],this.setElement(this.template({data:this})),this.$el.prependTo(this.page.$fixedBgContainer),this.$picture=this.$(".picture-background"),this.$video=this.$(".video-background"),this.$videoContainer=this.$(".video-container"),this.$slideshow=this.$(".slideshow-container"),this.$slideshowPreload=this.$(".slideshow-preload"),this.picture&&this.selectedType==="picture"?this.renderPicture():!s.default.isEmpty(this.video)&&this.selectedType==="video"?this.renderVideo():this.slideshow&&this.selectedType==="slideshow"?this.renderSlideshow():(o("viewer.paintGlassToolbar")&&Modernizr.mobilesafari26&&window.CSS?.supports?.("background-color",`#${this.color}`)&&(this.page.$el.css("background-color",`#${this.color}`),this.page.$el.find(".page-fixed-bg-container").addClass("hidden"),this.page.$el.find(".content-scroll-wrapper").addClass("unshifted")),this.widgetIsLoaded()),this},start:function(){return this.started=!0,this.selectedType==="video"&&!RM.screenshot&&this.rendered&&this.videoWidget&&!this.destroyed&&this.videoWidget.start(),this.selectedType==="slideshow"&&!RM.screenshot&&this.rendered&&!this.destroyed&&this.slideshowWidget&&!this.slideshowWidget.isAnimationRunning&&this.slideshowWidget.startAnimationLoop(),this},stop:function(){return this.started=!1,this.selectedType==="video"&&!RM.screenshot&&this.rendered&&this.videoWidget&&!this.destroyed&&this.videoWidget.stop(),this.selectedType==="slideshow"&&!RM.screenshot&&this.rendered&&!this.destroyed&&this.slideshowWidget&&this.slideshowWidget.isAnimationRunning&&this.slideshowWidget.stopAnimationLoop(),this},destroy:function(){return this.selectedType==="video"&&(this.videoWidget&&this.videoWidget.destroy(),this.videoWidget=null),this.selectedType==="slideshow"&&(this.slideshowWidget&&this.slideshowWidget.destroy(),this.slideshowWidget=null),t.prototype.destroy.apply(this,arguments)},hasVideoBG:function(){return!!(!RM.screenshot&&this.selectedType==="video"&&this.video&&this.video.url)},renderPicture:function(){if(!this.picture){this.widgetIsLoaded();return}let d=e.useLambdaUrl(this.picture)||e.useLambdaUrlOldProjects(this.picture,"background")?e.getLambdaUrl(this.picture):this.picture.finalUrl||this.picture.effectUrl||this.picture.unscaledOptimizedUrl||this.picture.url;(0,l.default)("<img/>").on("load",s.default.bind(function(){this.$picture.css({"background-image":"url("+d+")"}),RM.screenshot?setTimeout(this.widgetIsLoaded,200):this.widgetIsLoaded()},this)).on("error",this.widgetIsLoaded).attr("src",d)},renderSlideshow:function(){this.slideshowWidget=new r({data:this.slideshow,container:this.$slideshow,preloadContainer:this.$slideshowPreload,name:this.page.cid}),RM.screenshot?(this.slideshowWidget.render(),this.slideshowWidget.on("loaded",function(){this.widgetIsLoaded()}.bind(this))):(this.slideshowWidget.render(!this.page.isCurrent()),this.widgetIsLoaded())},renderVideo:function(){this.videoWidget=new h({el:this.$videoContainer.get(0),model:new a.default.Model({video:this.video}),attributes:{thumbnailMode:window.RM.screenshot}}),this.videoWidget.on("loaded",()=>{this.widgetIsLoaded()}),this.videoWidget.on("playStarted",()=>{this.trigger("videoBGStarted")}),this.videoWidget.render()}}),M=v;export{M as default};
